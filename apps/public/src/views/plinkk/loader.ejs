<style>.loader-overlay {position: fixed;inset: 0;display: flex;align-items: center;justify-content: center;z-index: 99999;background: linear-gradient(180deg, rgba(64, 29, 95, 0.92), rgba(62, 24, 68, 0.88));backdrop-filter: blur(4px);}
.loader {--size: 250px;--duration: 2s;--logo-color: grey;--background: linear-gradient(0deg,rgba(50, 50, 50, 0.2) 0%,rgba(100, 100, 100, 0.2) 100%);height: var(--size);aspect-ratio: 1;position: relative;display: grid;place-content: center;}
.loader .box {position: absolute;background: rgba(100, 100, 100, 0.15);background: var(--background);border-radius: 50%;border-top: 1px solid rgba(100, 100, 100, 1);box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px; backdrop-filter: blur(5px);animation: ripple var(--duration) infinite ease-in-out;}
.loader .box:nth-child(1) {inset: 40%;z-index: 99;}
.loader .box:nth-child(2) {inset: 30%;z-index: 98;border-color: rgba(100, 100, 100, 0.8);animation-delay: 0.2s;}
.loader .box:nth-child(3) {inset: 20%;z-index: 97;border-color: rgba(100, 100, 100, 0.6);animation-delay: 0.4s;}
.loader .box:nth-child(4) {inset: 10%;z-index: 96;border-color: rgba(100, 100, 100, 0.4);animation-delay: 0.6s;}
.loader .box:nth-child(5) {inset: 0%;z-index: 95;border-color: rgba(100, 100, 100, 0.2);animation-delay: 0.8s;}
.loader .logo {position: absolute;inset: 0;display: grid;place-content: center;}
.loader .logo svg {fill: var(--logo-color);width: 100%;animation: color-change var(--duration) infinite ease-in-out;}
@keyframes ripple {0% {transform: scale(1);box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px;}50% {transform: scale(1.3);box-shadow: rgba(0, 0, 0, 0.3) 0px 30px 20px -0px;}100% {transform: scale(1);box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px;}}
@keyframes color-change {0% {fill: var(--logo-color);}50% {fill: white;}100% {fill: var(--logo-color);}}
</style>
<div class="loader-overlay" role="status" aria-label="Chargement en cours">
  <div class="loader">
    <div class="box">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="256" height="256" role="img"
          aria-label="Plinkk logo">
          <defs>
            <linearGradient id="brand" x1="8" y1="56" x2="56" y2="8" gradientUnits="userSpaceOnUse">
              <stop offset="0" stop-color="#6366f1" />
              <stop offset="0.5" stop-color="#d946ef" />
              <stop offset="1" stop-color="#10b981" />
            </linearGradient>
          </defs>
          <circle cx="32" cy="32" r="28" fill="#0b1220" />
          <circle cx="32" cy="32" r="26" fill="none" stroke="url(#brand)" stroke-width="3" />
          <path d="M22 20h12c6 0 11 5 11 11s-5 11-11 11H26v12" fill="none" stroke="#ffffff" stroke-width="6"
            stroke-linecap="round" stroke-linejoin="round" />
          <g id="stars">
            <circle cx="18" cy="16" r="0.9" fill="#ffffff" opacity="0.95" />
            <circle cx="50" cy="24" r="0.8" fill="#ffffff" opacity="0.9" />
            <circle cx="14" cy="44" r="0.8" fill="#ffffff" opacity="0.85" />
            <g opacity="0.9" stroke="#ffffff" stroke-linecap="round" stroke-width="1">
              <line x1="46.5" y1="12.5" x2="49.5" y2="12.5" />
              <line x1="48" y1="11" x2="48" y2="14" />
            </g>
            <g opacity="0.85" stroke="#ffffff" stroke-linecap="round" stroke-width="0.9">
              <line x1="20" y1="50.5" x2="22.2" y2="50.5" />
              <line x1="21.1" y1="49.4" x2="21.1" y2="51.6" />
            </g>
          </g>
        </svg>
      </div>
    </div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
  </div>

</div>
<script>(function () {
    const overlay = document.querySelector('.loader-overlay');
    if (!overlay) return;
    const loader = overlay.querySelector('.loader');
    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function hideLoader(options = {}) {
        const { immediate = false } = options;
        if (overlay.dataset.hidden === 'true') return;
        overlay.dataset.hidden = 'true';

        if (immediate || prefersReduced) {
            overlay.style.display = 'none';
            removeFromDom();
            return;
        }
        overlay.style.transition = 'opacity 300ms ease, visibility 300ms';
        overlay.style.opacity = '1';
        loader.offsetWidth;
        overlay.style.opacity = '0';
        const onEnd = function () {
            overlay.removeEventListener('transitionend', onEnd);
            removeFromDom();
        };
        overlay.addEventListener('transitionend', onEnd);
        setTimeout(() => {
            if (document.body.contains(overlay)) removeFromDom();
        }, 600);
    }

    function removeFromDom() {
        if (!overlay.parentNode) return;
        try {
            overlay.parentNode.removeChild(overlay);
        } catch (e) {}
    }
    if (document.readyState === 'complete') {
        hideLoader();
    } else {
        window.addEventListener('load', () => hideLoader());
    }
    function onKey(e) {
        if (e.key === 'Escape' || e.key === 'Esc') {
            hideLoader({ immediate: true });
        }
    }
    window.addEventListener('keydown', onKey, { passive: true });

    const FALLBACK_TIMEOUT = 5000; // ms
    const fallbackTimer = setTimeout(() => {
        hideLoader();
    }, FALLBACK_TIMEOUT);

    const observer = new MutationObserver(() => {
        if (!document.body.contains(overlay)) {
            clearTimeout(fallbackTimer);
            observer.disconnect();
            window.removeEventListener('keydown', onKey);
        }
    });
    observer.observe(document.documentElement, { childList: true, subtree: true });
})();</script>
