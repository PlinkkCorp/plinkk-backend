<% if (typeof frontendUrl==='undefined' ) { var frontendUrl='https://plinkk.fr' ; } %>
    <%- include('partials/head', { title: 'Maintenance en cours - Plinkk' }) %>
    <%- include('partials/header') %>

        <main
            class="relative flex min-h-screen pt-20 lg:pt-0 items-center justify-center overflow-hidden px-4 md:px-8 bg-slate-950">
            <!-- Background Effects -->
            <div
                class="absolute top-1/2 left-1/4 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-violet-600/5 rounded-full blur-[120px] pointer-events-none">
            </div>
            <div
                class="absolute bottom-0 right-0 w-[600px] h-[600px] bg-blue-600/5 rounded-full blur-[100px] pointer-events-none">
            </div>

            <div class="relative z-10 w-full max-w-7xl grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-24 items-center">

                <!-- Left Column: Message -->
                <div class="text-center lg:text-left space-y-8 animate-in slide-in-from-left-8 fade-in duration-700">
                    <div>
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-violet-500/10 border border-violet-500/20 text-violet-400 text-xs font-semibold uppercase tracking-wider mb-6">
                            <svg class="w-3 h-3 animate-spin" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                    stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor"
                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                </path>
                            </svg>
                            Maintenance Système
                        </div>
                        <h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl lg:leading-tight">
                            Nous revenons <span
                                class="text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-blue-400">très
                                bientôt</span>
                        </h1>
                        <p class="mt-6 text-lg text-slate-400 max-w-xl mx-auto lg:mx-0">
                            Nous effectuons actuellement une mise à jour importante de l'infrastructure pour améliorer
                            vos services. Merci de votre patience.
                        </p>
                    </div>

                    <% if (typeof reason !=='undefined' && reason) { %>
                        <div
                            class="inline-block w-full max-w-md p-6 rounded-2xl bg-slate-900/50 border border-slate-700/50 backdrop-blur-sm text-left shadow-xl">
                            <p class="text-[10px] font-bold text-slate-500 uppercase mb-2 flex items-center gap-2">
                                <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Message de l'équipe
                            </p>
                            <p class="text-slate-300 font-medium leading-relaxed">"<%= reason %>"</p>
                        </div>
                        <% } %>

                            <div class="hidden lg:block pt-8 border-t border-white/5">
                                <p class="text-xs text-slate-500">
                                    Besoin d'aide urgente ? <a href="mailto:support@plinkk.fr"
                                        class="text-violet-400 hover:text-white transition-colors">Contactez le
                                        support</a>
                                </p>
                            </div>
                </div>

                <!-- Right Column: Game -->
                <div
                    class="flex flex-col items-center space-y-6 animate-in slide-in-from-right-8 fade-in duration-700 delay-100">

                    <!-- Game Container -->
                    <div class="relative group w-full max-w-md"> <!-- limit game size -->

                        <!-- Game Selector (Above game relative) -->
                        <div
                            class="absolute -top-14 left-1/2 -translate-x-1/2 flex p-1 bg-slate-900/90 backdrop-blur rounded-xl border border-slate-800 shadow-xl z-20">
                            <button onclick="switchGame('snake')" id="btn-snake"
                                class="flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                                </svg>
                                Snake
                            </button>
                            <button onclick="switchGame('breakout')" id="btn-breakout"
                                class="flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z" />
                                </svg>
                                Breakout
                            </button>
                        </div>

                        <div
                            class="absolute -inset-1 bg-gradient-to-r from-violet-600 to-blue-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200">
                        </div>
                        <div
                            class="relative bg-slate-950 rounded-xl border border-slate-800 shadow-2xl overflow-hidden aspect-square">
                            <!-- Direct include of partials in this container -->
                            <%- include('partials/games/snake') %>
                                <%- include('partials/games/breakout') %>
                        </div>
                    </div>

                    <p class="text-xs text-slate-500 font-mono text-center pt-2">
                        Utilisez les flèches du clavier pour jouer
                    </p>
                </div>

            </div>
        </main>

        <script>
            function switchGame(game) {
                // Toggle Visibility
                const snakeBtn = document.getElementById('btn-snake');
                const breakoutBtn = document.getElementById('btn-breakout');
                const snakeEl = document.getElementById('game-snake');
                const breakoutEl = document.getElementById('game-breakout');

                // Styles for active/inactive tabs
                const activeClass = 'bg-violet-600 text-white shadow-violet-500/20 ring-violet-500/50';
                const activeClassBlue = 'bg-blue-600 text-white shadow-blue-500/20 ring-blue-500/50';
                const inactiveClass = 'text-slate-400 hover:text-white hover:bg-slate-800 ring-transparent';

                if (game === 'snake') {
                    snakeBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all shadow-lg ring-1 ring-inset ${activeClass}`;
                    breakoutBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all ${inactiveClass}`;

                    snakeEl.style.display = 'block';
                    breakoutEl.style.display = 'none';
                    if (window.breakoutGame) window.breakoutGame.stop();
                } else {
                    snakeBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all ${inactiveClass}`;
                    breakoutBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all shadow-lg ring-1 ring-inset ${activeClassBlue}`;

                    snakeEl.style.display = 'none';
                    breakoutEl.style.display = 'block';
                    if (window.snakeGame) window.snakeGame.stop();
                }
            }

            // Init and ensure one is shown (Snake default)
            document.addEventListener('DOMContentLoaded', () => {
                switchGame('snake');
            });
        </script>
    <%- include('partials/footer') %>